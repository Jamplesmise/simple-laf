/* AI 悬浮球样式 - 吉卜力风格猴子程序员 */

.monkeyContainer {
  width: 80px;
  height: 70px;
  position: fixed;
  cursor: grab;
  z-index: 9999;
  user-select: none;
  transition: transform 0.2s ease, filter 0.2s ease;
  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.15));
}

.monkeyContainer:active {
  cursor: grabbing;
}

.monkeySvg {
  width: 100%;
  height: 100%;
}

/* 悬浮放大效果 */
.monkeyContainer:hover {
  transform: scale(1.1);
  filter: drop-shadow(0 6px 12px rgba(0, 0, 0, 0.2));
}

/* 拖拽中 */
.monkeyContainer.dragging {
  cursor: grabbing;
  transform: scale(1.05);
  filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.25));
}

/* 猴子头部轻微晃动 - 空闲状态 */
@keyframes headBob {
  0%, 100% {
    transform: translateY(0) rotate(0deg);
  }
  50% {
    transform: translateY(-1px) rotate(1deg);
  }
}

.monkeyContainer:not(.dragging):not(:hover) .monkeyHead {
  animation: headBob 2s ease-in-out infinite;
}

/* 眨眼动画 */
@keyframes blink {
  0%, 92%, 100% {
    transform: scaleY(1);
  }
  96% {
    transform: scaleY(0.1);
  }
}

.eyes {
  animation: blink 4s ease-in-out infinite;
  transform-origin: center;
}

/* 瞳孔微动 */
@keyframes lookAround {
  0%, 100% {
    transform: translate(0, 0);
  }
  25% {
    transform: translate(0.5px, -0.5px);
  }
  50% {
    transform: translate(-0.5px, 0);
  }
  75% {
    transform: translate(0.5px, 0.5px);
  }
}

.pupil {
  animation: lookAround 5s ease-in-out infinite;
}

/* 代码行闪烁效果 */
@keyframes codeBlink {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}

.codeLines rect:nth-child(odd) {
  animation: codeBlink 1.5s ease-in-out infinite;
}

.codeLines rect:nth-child(even) {
  animation: codeBlink 1.5s ease-in-out infinite 0.3s;
}

/* 手臂打字动画 */
@keyframes typing {
  0%, 100% {
    transform: translateY(0);
  }
  25% {
    transform: translateY(-0.5px);
  }
  75% {
    transform: translateY(-0.5px);
  }
}

.monkeyContainer:not(.dragging) .arms ellipse:first-child {
  animation: typing 0.3s ease-in-out infinite;
}

.monkeyContainer:not(.dragging) .arms ellipse:last-of-type {
  animation: typing 0.3s ease-in-out infinite 0.15s;
}

/* 发送中状态 - 快速打字 */
.monkeyContainer.sending {
  animation: bounce 0.5s ease-in-out infinite;
}

@keyframes bounce {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-3px);
  }
}

.monkeyContainer.sending .codeLines rect {
  animation: codeFlash 0.2s ease-in-out infinite;
}

@keyframes codeFlash {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.4;
  }
}

.monkeyContainer.sending .arms ellipse {
  animation: typingFast 0.15s ease-in-out infinite !important;
}

@keyframes typingFast {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-1px);
  }
}

/* 思考中状态 - 头部倾斜思考 */
.monkeyContainer.thinking .monkeyHead {
  animation: thinking 1.5s ease-in-out infinite !important;
}

@keyframes thinking {
  0%, 100% {
    transform: translateY(0) rotate(0deg);
  }
  25% {
    transform: translateY(-1px) rotate(-3deg);
  }
  75% {
    transform: translateY(-1px) rotate(3deg);
  }
}

.monkeyContainer.thinking .pupil {
  animation: thinkLook 1.5s ease-in-out infinite !important;
}

@keyframes thinkLook {
  0%, 100% {
    transform: translate(0, -1px);
  }
  50% {
    transform: translate(1px, -1px);
  }
}

/* 屏幕在思考时显示加载指示 */
.monkeyContainer.thinking .codeLines rect {
  animation: thinkingCode 0.8s ease-in-out infinite;
}

@keyframes thinkingCode {
  0% {
    opacity: 1;
    transform: translateX(0);
  }
  50% {
    opacity: 0.5;
    transform: translateX(2px);
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
}

/* 微笑动画 - 开心时更弯 */
.monkeyContainer:hover .smile {
  d: path("M36 30 Q40 35 44 30");
}

/* 暗色主题适配 */
:global(.dark) .monkeyContainer {
  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
}

:global(.dark) .monkeyContainer:hover {
  filter: drop-shadow(0 6px 12px rgba(0, 0, 0, 0.4));
}
